<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Animated Fish and Underwater Scene</title>
    <style>
        body {
            margin: 0;
            padding: 0;
        }

        canvas {
            display: block;
            margin: auto;
            border: 1px solid black;
        }
    </style>
</head>

<body>
    <canvas id="myCanvas" width="800" height="400"></canvas>

    <script>
        var canvas = document.getElementById("myCanvas");
        var ctx = canvas.getContext("2d");

        var centerX = canvas.width / 4; // Fish 
        var centerY = canvas.height / 2; // Adjusted the initial Y coordinate
        var bodyLength = canvas.width / 6;
        var bodyHeight = canvas.height / 9;
        var fcolor = "rgb(0, 68, 255)";

        var tailWidth = bodyLength / 4;
        var tailHeight = bodyHeight / 2;

        var bubbleX = canvas.width / 8; // Bubble 
        var bubbleY = canvas.height - 30; // Adjusted the initial Y coordinate
        var bubbleW = canvas.width / 16;
        var bubbleH = canvas.height / 18;

        var speed = 2; // Adjusted fish speed

        function draw() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            // Draw sea bed
            ctx.fillStyle = "rgb(81, 173, 196)";
            ctx.fillRect(0, canvas.height / 2, canvas.width, canvas.height / 2); // Adjusted sea bed position

            // Fish function
            function fish(centerX, centerY, bodyLength, bodyHeight, fcolor, tailWidth, tailHeight) {
                ctx.strokeStyle = "rgb(0, 0, 0)";
                ctx.lineWidth = 0.2;
                ctx.fillStyle = fcolor;
                // Body
                ctx.beginPath();
                ctx.ellipse(centerX, centerY, bodyLength / 2, bodyHeight / 2, 0, 0, Math.PI * 2);
                ctx.fill();
                ctx.stroke();
                // Tail
                ctx.beginPath();
                ctx.moveTo(centerX - bodyLength / 2, centerY);
                ctx.lineTo(centerX - bodyLength / 2 - tailWidth, centerY - tailHeight);
                ctx.lineTo(centerX - bodyLength / 2 - tailWidth, centerY + tailHeight);
                ctx.closePath();
                ctx.fill();
                ctx.stroke();
                // Eye
                ctx.fillStyle = "rgb(33, 33, 33)";
                ctx.beginPath();
                ctx.ellipse(centerX + bodyLength / 4, centerY, bodyHeight / 10, bodyHeight / 10, 0, 0, Math.PI * 2);
                ctx.fill();
            }

            // Bubble function
            function bubble(bubbleX, bubbleY, bubbleW, bubbleH) {
                ctx.fillStyle = "rgb(143, 208, 255)";
                ctx.beginPath();
                ctx.ellipse(bubbleX, bubbleY, (bubbleW + 5) / 2, (bubbleH + 10) / 2, 0, 0, Math.PI * 2);
                ctx.fill();

                ctx.fillStyle = "rgb(107, 169, 214)";
                ctx.beginPath();
                ctx.ellipse(bubbleX, bubbleY, bubbleW / 2, (bubbleH - 5) / 2, 0, 0, Math.PI * 2);
                ctx.fill();

                ctx.fillStyle = "rgb(184, 225, 255)";
                ctx.beginPath();
                ctx.ellipse(bubbleX, bubbleY, bubbleW / 2, bubbleH / 2, 0, 0, Math.PI * 2);
                ctx.fill();

                ctx.fillStyle = "rgb(255, 255, 255)";
                ctx.beginPath();
                ctx.ellipse(bubbleX + 7, bubbleY - 4, (bubbleW - 30) / 2, (bubbleH - 25) / 2, 0, 0, Math.PI * 2);
                ctx.fill();

                ctx.beginPath();
                ctx.ellipse(bubbleX - 7, bubbleY + 13, (bubbleW - 44) / 2, (bubbleH - 43) / 2, 0, 0, Math.PI * 2);
                ctx.fill();
            }

            // Draw bubbles
            bubble(canvas.width / 4, bubbleY, bubbleW, bubbleH);
            bubble(canvas.width / 2, bubbleY, bubbleW * 0.7, bubbleH * 0.7);
            bubble(canvas.width * 3 / 4, bubbleY, bubbleW * 0.15, bubbleH * 0.15);

            // Draw fish
            fish(centerX, centerY, bodyLength, bodyHeight, fcolor, tailWidth, tailHeight);
            fish(canvas.width * 3 / 4, canvas.height * 3 / 4, bodyLength * 0.7, bodyHeight * 0.7, fcolor, tailWidth * 0.7, tailHeight * 0.7);
            fish(canvas.width / 5, canvas.height * 3 / 5, bodyLength * 0.8, bodyHeight * 0.8, fcolor, tailWidth * 0.8, tailHeight * 0.8);

            // Update fish position
            if (centerX > canvas.width + 100 || centerX < -100) {
                speed *= -1;
            }
            centerX += speed;
            bubbleY -= 1; // Adjusted bubble movement speed

            requestAnimationFrame(draw);
        }

        draw();
    </script>
</body>

</html>
